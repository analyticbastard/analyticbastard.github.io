
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Max Subsequence Problem - The Analytic Bastard</title>
  <meta name="author" content="Analytic Bastard">

  
  <meta name="description" content="The following brainteaser is about finding the maximum-sum subsequence within a given sequence.
We will solve this problem in Clojure, sice this will &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://analyticbastard.github.io/blog/2015/05/02/max-subsequence-problem">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="The Analytic Bastard" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib<n/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">google.load("feeds", "1");</script>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">The Analytic Bastard</a></h1>
  
    <h2>Making geometers go crazier</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:analyticbastard.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Max Subsequence Problem</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-05-02T21:05:23+02:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2015</span></span> <span class='time'>9:05 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>The following brainteaser is about finding the maximum-sum subsequence within a given sequence.
We will solve this problem in Clojure, sice this will involve less pain than doing it in Java.</p>

<p>We need to decompose the sequence in parts, and a natural way of doing it is dividing it in halves,
using a binary tree. For this purpose, we take the sequence at the current stage, divide it in two
parts, and call the same function recursively for each half. The recursion-stopping criteria are the point when
we find either two or only one element in the sequence (odd or even super sequence), at which point
we return the information we need (we’ll talk about this later on).</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">best</span> <span class="p">[</span><span class="nv">myseq</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">N</span> <span class="p">(</span><span class="nb">count </span><span class="nv">myseq</span><span class="p">)]</span>
</span><span class="line">    <span class="p">(</span><span class="nf">case</span> <span class="nv">N</span>
</span><span class="line">      <span class="mi">1</span> <span class="nv">nil</span>
</span><span class="line">      <span class="mi">2</span> <span class="nv">nil</span>
</span><span class="line">      <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">n</span> <span class="p">(</span><span class="nf">Math/round</span> <span class="p">(</span><span class="nb">double </span><span class="p">(</span><span class="nb">/ </span><span class="nv">N</span> <span class="mi">2</span><span class="p">)))</span>
</span><span class="line">            <span class="nv">m</span> <span class="p">(</span><span class="nb">- </span><span class="nv">N</span> <span class="nv">n</span><span class="p">)</span>
</span><span class="line">            <span class="nv">s1</span> <span class="p">(</span><span class="nb">take </span><span class="nv">n</span> <span class="nv">myseq</span><span class="p">)</span>
</span><span class="line">            <span class="nv">s2</span> <span class="p">(</span><span class="nf">take-last</span> <span class="nv">m</span> <span class="nv">myseq</span><span class="p">)</span>
</span><span class="line">            <span class="nv">m1</span> <span class="p">(</span><span class="nf">best</span> <span class="nv">s1</span><span class="p">)</span>
</span><span class="line">            <span class="nv">m2</span> <span class="p">(</span><span class="nf">best</span> <span class="nv">s2</span><span class="p">)</span>
</span><span class="line">            <span class="p">]</span>
</span><span class="line">
</span><span class="line">        <span class="p">))</span>
</span><span class="line">    <span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This was the basic recursion skeleton. Now we need to return and process the interesting information
about the sequence at each stage. We need the maximum-sum sub-sequence at each stage in the binary
search, the discarded sequence at the left, and the discarded sequence at the right (both of which must be
negative because they would otherwise increase the sum). For example, the sequence <code>[-1 -1 3 4 -2]</code> would
produce a best subsequence <code>[3 4]</code>, a discarded left sequence <code>[-1 -1]</code> and a discarded right sequence
[-2]. Optionally and for the sake of performance, we also return the sums of these sequences, so that
we don’t need to recompute at the upper-levels (when returning from the call). The information retrieved from
the lower levels is a map with this structure (using the previous example):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">{</span><span class="ss">:l</span> <span class="mi">-2</span> <span class="ss">:sum</span> <span class="mi">7</span> <span class="ss">:r</span> <span class="p">[</span><span class="mi">-2</span><span class="p">]</span> <span class="ss">:sl</span> <span class="p">[</span><span class="mi">-1</span> <span class="mi">-1</span><span class="p">]</span> <span class="ss">:seq</span> <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span><span class="p">]</span> <span class="ss">:sr</span> <span class="p">[</span><span class="mi">-2</span><span class="p">]}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>where the first three keys are the sums, and the last three keys are the proper sequences. We now build
the information according to the sequence we recieve as input. When there is only one element, it is easy to
see that we need to return empty discarded sequences, and the input number as the best sequence. If we get
two elements, we need to check whether both are positive, in which case, we return both as the best sequence
(and empty discarded left and right sequences). Otherwise, get the maximum, return it as the best sequence,
and return the other as either the left or right discarded sequence depending on whether it was the first or
second in the sequence. Note, at this point, that the discarded sequences mean how large the penalization is
to get to the best sequence for a given subsequence from the left or the right. In the recursion stage, when
we have two subsequences, we need to check if the total sum of both best subsequences and everything in the
middle (the right discarded sequence from the left half and the left discarded sequence from the right half)
is larger than the maximum of the best subsequence of either half. We concatenate the sequences to compose
the left and right discarded sequences, and the best sequences up to this stage. This is the result:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">(</span><span class="kd">defn </span><span class="nv">best</span> <span class="p">[</span><span class="nv">myseq</span><span class="p">]</span>
</span><span class="line">  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">N</span> <span class="p">(</span><span class="nb">count </span><span class="nv">myseq</span><span class="p">)]</span>
</span><span class="line">    <span class="p">(</span><span class="nf">case</span> <span class="nv">N</span>
</span><span class="line">      <span class="mi">1</span> <span class="p">{</span><span class="ss">:l</span> <span class="mi">0</span> <span class="ss">:r</span> <span class="mi">0</span> <span class="ss">:sl</span> <span class="p">[]</span> <span class="ss">:sr</span> <span class="p">[]</span> <span class="ss">:seq</span> <span class="nv">myseq</span> <span class="ss">:sum</span> <span class="p">(</span><span class="nb">first </span><span class="nv">myseq</span><span class="p">)}</span>
</span><span class="line">      <span class="mi">2</span> <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">and </span><span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nb">first </span><span class="nv">myseq</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nb">second </span><span class="nv">myseq</span><span class="p">)</span> <span class="mi">0</span><span class="p">))</span>
</span><span class="line">          <span class="p">{</span><span class="ss">:l</span> <span class="mi">0</span> <span class="ss">:r</span> <span class="mi">0</span> <span class="ss">:sl</span> <span class="p">[]</span> <span class="ss">:seq</span> <span class="nv">myseq</span> <span class="ss">:sr</span> <span class="p">[]</span> <span class="ss">:sum</span> <span class="p">(</span><span class="nb">apply + </span><span class="nv">myseq</span><span class="p">)}</span>
</span><span class="line">          <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&lt; </span><span class="p">(</span><span class="nb">first </span><span class="nv">myseq</span><span class="p">)</span> <span class="p">(</span><span class="nb">second </span><span class="nv">myseq</span><span class="p">))</span>
</span><span class="line">            <span class="p">{</span><span class="ss">:l</span> <span class="p">(</span><span class="nb">first </span><span class="nv">myseq</span><span class="p">)</span> <span class="ss">:r</span> <span class="mi">0</span> <span class="ss">:sl</span> <span class="p">[(</span><span class="nb">first </span><span class="nv">myseq</span><span class="p">)]</span> <span class="ss">:sr</span> <span class="p">[]</span> <span class="ss">:seq</span> <span class="p">(</span><span class="nb">rest </span><span class="nv">myseq</span><span class="p">)</span> <span class="ss">:sum</span> <span class="p">(</span><span class="nb">second </span><span class="nv">myseq</span><span class="p">)}</span>
</span><span class="line">            <span class="p">{</span><span class="ss">:l</span> <span class="mi">0</span> <span class="ss">:r</span> <span class="p">(</span><span class="nb">second </span><span class="nv">myseq</span><span class="p">)</span> <span class="ss">:sl</span> <span class="p">[]</span> <span class="ss">:sr</span> <span class="p">(</span><span class="nb">rest </span><span class="nv">myseq</span><span class="p">)</span> <span class="ss">:seq</span> <span class="p">[(</span><span class="nb">first </span><span class="nv">myseq</span><span class="p">)]</span> <span class="ss">:sum</span> <span class="p">(</span><span class="nb">first </span><span class="nv">myseq</span><span class="p">)}))</span>
</span><span class="line">      <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">n</span> <span class="p">(</span><span class="nf">Math/round</span> <span class="p">(</span><span class="nb">double </span><span class="p">(</span><span class="nb">/ </span><span class="nv">N</span> <span class="mi">2</span><span class="p">)))</span>
</span><span class="line">            <span class="nv">m</span> <span class="p">(</span><span class="nb">- </span><span class="nv">N</span> <span class="nv">n</span><span class="p">)</span>
</span><span class="line">            <span class="nv">s1</span> <span class="p">(</span><span class="nb">take </span><span class="nv">n</span> <span class="nv">myseq</span><span class="p">)</span>
</span><span class="line">            <span class="nv">s2</span> <span class="p">(</span><span class="nb">reverse </span><span class="p">(</span><span class="nb">take </span><span class="nv">m</span> <span class="p">(</span><span class="nb">reverse </span><span class="nv">myseq</span><span class="p">)))</span>
</span><span class="line">            <span class="nv">m1</span> <span class="p">(</span><span class="nf">best</span> <span class="nv">s1</span><span class="p">)</span>
</span><span class="line">            <span class="nv">m2</span> <span class="p">(</span><span class="nf">best</span> <span class="nv">s2</span><span class="p">)</span>
</span><span class="line">            <span class="nv">sum2</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="ss">:sum</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sum</span> <span class="nv">m2</span><span class="p">))</span>
</span><span class="line">            <span class="nv">cost</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="ss">:r</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:l</span> <span class="nv">m2</span><span class="p">))</span>
</span><span class="line">            <span class="nv">sumt</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">sum2</span> <span class="nv">cost</span><span class="p">)</span>
</span><span class="line">            <span class="p">]</span>
</span><span class="line">        <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="nv">sumt</span> <span class="p">(</span><span class="nb">max </span><span class="p">(</span><span class="ss">:sum</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sum</span> <span class="nv">m2</span><span class="p">)))</span>
</span><span class="line">          <span class="p">{</span><span class="ss">:l</span> <span class="p">(</span><span class="ss">:l</span> <span class="nv">m1</span><span class="p">)</span> <span class="ss">:r</span> <span class="p">(</span><span class="ss">:r</span> <span class="nv">m2</span><span class="p">)</span> <span class="ss">:sl</span> <span class="p">(</span><span class="ss">:sl</span> <span class="nv">m1</span><span class="p">)</span> <span class="ss">:sr</span> <span class="p">(</span><span class="ss">:sr</span> <span class="nv">m2</span><span class="p">)</span> <span class="ss">:seq</span> <span class="p">(</span><span class="nb">concat </span><span class="p">(</span><span class="ss">:seq</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sr</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sl</span> <span class="nv">m2</span><span class="p">)</span> <span class="p">(</span><span class="ss">:seq</span> <span class="nv">m2</span><span class="p">))</span> <span class="ss">:sum</span> <span class="nv">sumt</span><span class="p">}</span>
</span><span class="line">          <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="ss">:sum</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sum</span> <span class="nv">m2</span><span class="p">))</span>
</span><span class="line">            <span class="p">{</span><span class="ss">:l</span> <span class="p">(</span><span class="ss">:l</span> <span class="nv">m1</span><span class="p">)</span> <span class="ss">:r</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="ss">:r</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:l</span> <span class="nv">m2</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sum</span> <span class="nv">m2</span><span class="p">)</span> <span class="p">(</span><span class="ss">:r</span> <span class="nv">m2</span><span class="p">))</span> <span class="ss">:sl</span> <span class="p">(</span><span class="ss">:sl</span> <span class="nv">m1</span><span class="p">)</span> <span class="ss">:sr</span> <span class="p">(</span><span class="nb">concat </span><span class="p">(</span><span class="ss">:sr</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sl</span> <span class="nv">m2</span><span class="p">)</span> <span class="p">(</span><span class="ss">:seq</span> <span class="nv">m2</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sr</span> <span class="nv">m2</span><span class="p">))</span> <span class="ss">:seq</span> <span class="p">(</span><span class="ss">:seq</span> <span class="nv">m1</span><span class="p">)</span> <span class="ss">:sum</span> <span class="p">(</span><span class="ss">:sum</span> <span class="nv">m1</span><span class="p">)}</span>
</span><span class="line">            <span class="p">{</span><span class="ss">:l</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="ss">:l</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:r</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sum</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:l</span> <span class="nv">m2</span><span class="p">))</span> <span class="ss">:r</span> <span class="p">(</span><span class="ss">:r</span> <span class="nv">m2</span><span class="p">)</span> <span class="ss">:sl</span> <span class="p">(</span><span class="nb">concat </span><span class="p">(</span><span class="ss">:sl</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:seq</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sr</span> <span class="nv">m1</span><span class="p">)</span> <span class="p">(</span><span class="ss">:sl</span> <span class="nv">m2</span><span class="p">))</span> <span class="ss">:sr</span> <span class="p">(</span><span class="ss">:sr</span> <span class="nv">m2</span><span class="p">)</span> <span class="ss">:seq</span> <span class="p">(</span><span class="ss">:seq</span> <span class="nv">m2</span><span class="p">)</span> <span class="ss">:sum</span> <span class="p">(</span><span class="ss">:sum</span> <span class="nv">m2</span><span class="p">)}))</span>
</span><span class="line">        <span class="p">))</span>
</span><span class="line">    <span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>As test data, we choose three sequences, one whose best subsequence is in the middle, separated by negative numbers
(one in this case), another whose best subsequence is at the left side, and it is not worth to join it with another
positive sequence at the right side, and one whose best subsequence is itself.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">(</span><span class="k">def </span><span class="nv">ex-bestmiddle</span> <span class="p">[</span><span class="mi">-1</span> <span class="mi">-3</span> <span class="mi">-2</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">-1</span> <span class="mi">3</span> <span class="mi">-2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">-1</span> <span class="mi">-3</span><span class="p">])</span>
</span><span class="line"><span class="p">(</span><span class="k">def </span><span class="nv">ex-bestleft</span> <span class="p">[</span><span class="mi">-1</span> <span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">-2</span> <span class="mi">-5</span> <span class="mi">-3</span> <span class="mi">-3</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">-1</span> <span class="mi">-3</span><span class="p">])</span>
</span><span class="line"><span class="p">(</span><span class="k">def </span><span class="nv">ex-bestall</span> <span class="p">[</span><span class="mi">5</span> <span class="mi">-3</span> <span class="mi">-2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">-1</span> <span class="mi">3</span> <span class="mi">-2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">-1</span> <span class="mi">3</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>For the last one:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">(</span><span class="nf">best</span> <span class="nv">ex-bestall</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">{</span><span class="ss">:l</span> <span class="mi">0</span>, <span class="ss">:r</span> <span class="mi">0</span>, <span class="ss">:sl</span> <span class="p">[]</span>, <span class="ss">:sr</span> <span class="p">[]</span>, <span class="ss">:seq</span> <span class="p">(</span><span class="mi">5</span> <span class="mi">-3</span> <span class="mi">-2</span> <span class="mi">2</span> <span class="mi">2</span> <span class="mi">-1</span> <span class="mi">3</span> <span class="mi">-2</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">-1</span> <span class="mi">3</span><span class="p">)</span>, <span class="ss">:sum</span> <span class="mi">9</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>For the best subsequence on the left side:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">(</span><span class="nf">best</span> <span class="nv">ex-bestleft</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">{</span><span class="ss">:l</span> <span class="mi">-1</span>, <span class="ss">:r</span> <span class="mi">-12</span>, <span class="ss">:sl</span> <span class="p">[</span><span class="mi">-1</span><span class="p">]</span>, <span class="ss">:sr</span> <span class="p">(</span><span class="mi">-2</span> <span class="mi">-5</span> <span class="mi">-3</span> <span class="mi">-3</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">-1</span> <span class="mi">-3</span><span class="p">)</span>, <span class="ss">:seq</span> <span class="p">(</span><span class="mi">3</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">)</span>, <span class="ss">:sum</span> <span class="mi">6</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And for the best subsequence in the middle:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">(</span><span class="nf">best</span> <span class="nv">ex-bestmiddle</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="Clojure"><span class="line"><span class="p">{</span><span class="ss">:l</span> <span class="mi">-6</span>, <span class="ss">:r</span> <span class="mi">-4</span>, <span class="ss">:sl</span> <span class="p">(</span><span class="mi">-1</span> <span class="mi">-3</span> <span class="mi">-2</span><span class="p">)</span>, <span class="ss">:sr</span> <span class="p">(</span><span class="mi">-1</span> <span class="mi">-3</span><span class="p">)</span>, <span class="ss">:seq</span> <span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">-1</span> <span class="mi">3</span> <span class="mi">-2</span> <span class="mi">2</span> <span class="mi">1</span><span class="p">)</span>, <span class="ss">:sum</span> <span class="mi">6</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The code is on <a href="https://github.com/analyticbastard/java-exercises">Github</a> under <code>src/main/clj</code>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Analytic Bastard</span></span>

      




<time class='entry-date' datetime='2015-05-02T21:05:23+02:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2015</span></span> <span class='time'>9:05 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/brainteasers/'>brainteasers</a>, <a class='category' href='/blog/categories/clojure/'>clojure</a>, <a class='category' href='/blog/categories/programming/'>programming</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://analyticbastard.github.io/blog/2015/05/02/max-subsequence-problem/" data-via="" data-counturl="http://analyticbastard.github.io/blog/2015/05/02/max-subsequence-problem/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/04/09/manipulating-svg-images-from-browser-javascript/" title="Previous Post: Manipulating SVG images from browser Javascript">&laquo; Manipulating SVG images from browser Javascript</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/09/13/clojure-parallel-thread-flows-pth-library/" title="Next Post: Clojure Parallel Thread Flows Pth Library">Clojure Parallel Thread Flows Pth Library &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/09/13/clojure-parallel-thread-flows-pth-library/">Clojure Parallel Thread Flows Pth Library</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/02/max-subsequence-problem/">Max Subsequence Problem</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/09/manipulating-svg-images-from-browser-javascript/">Manipulating SVG Images From Browser Javascript</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/25/installing-theano-on-windows/">Installing Theano on Windows</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/08/the-monty-hall-problem-my-explanation/">The Monty Hall Problem (My Explanation)</a>
      </li>
    
  </ul>
</section>
<section>
    <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/brainteasers'>brainteasers (2)</a></li><li><a href='/blog/categories/clojure'>clojure (1)</a></li><li><a href='/blog/categories/computation'>computation (6)</a></li><li><a href='/blog/categories/data-analysis'>data analysis (5)</a></li><li><a href='/blog/categories/hacking'>hacking (2)</a></li><li><a href='/blog/categories/image-processing'>image processing (1)</a></li><li><a href='/blog/categories/kernel-methods'>kernel methods (3)</a></li><li><a href='/blog/categories/machine-learning'>machine learning (4)</a></li><li><a href='/blog/categories/mathematics'>mathematics (5)</a></li><li><a href='/blog/categories/matlab'>matlab (1)</a></li><li><a href='/blog/categories/programming'>programming (7)</a></li><li><a href='/blog/categories/python'>python (4)</a></li><li><a href='/blog/categories/software-development'>software development (1)</a></li><li><a href='/blog/categories/statistics'>statistics (4)</a></li><li><a href='/blog/categories/tools'>tools (5)</a></li></ul>
</section>
<section>
    <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/brainteasers' style='font-size: 117.14285714285714%'>brainteasers</a> <a href='/blog/categories/clojure' style='font-size: 108.57142857142857%'>clojure</a> <a href='/blog/categories/computation' style='font-size: 151.42857142857144%'>computation</a> <a href='/blog/categories/data-analysis' style='font-size: 142.85714285714286%'>data analysis</a> <a href='/blog/categories/hacking' style='font-size: 117.14285714285714%'>hacking</a> <a href='/blog/categories/image-processing' style='font-size: 108.57142857142857%'>image processing</a> <a href='/blog/categories/kernel-methods' style='font-size: 125.71428571428572%'>kernel methods</a> <a href='/blog/categories/machine-learning' style='font-size: 134.28571428571428%'>machine learning</a> <a href='/blog/categories/mathematics' style='font-size: 142.85714285714286%'>mathematics</a> <a href='/blog/categories/matlab' style='font-size: 108.57142857142857%'>matlab</a> <a href='/blog/categories/programming' style='font-size: 160.0%'>programming</a> <a href='/blog/categories/python' style='font-size: 134.28571428571428%'>python</a> <a href='/blog/categories/software-development' style='font-size: 108.57142857142857%'>software development</a> <a href='/blog/categories/statistics' style='font-size: 134.28571428571428%'>statistics</a> <a href='/blog/categories/tools' style='font-size: 142.85714285714286%'>tools</a> </span>
</section><section>
    <script type="text/javascript" src="//rb.revolvermaps.com/0/0/6.js?i=1eyn18efppk&amp;m=7&amp;s=270&amp;c=e63100&amp;cr1=ffffff&amp;f=arial&amp;l=0&amp;bv=90&amp;lx=-420&amp;ly=420&amp;hi=20&amp;he=7&amp;hc=a8ddff&amp;rs=80" async="async"></script>
</section><section>
  <h3>Blogroll</h3>
  <!-- IMPORTANT: Do not change the below ID as it will affect the functioning of the plugin-->
    <ul id="blogroll-list"><li><a href='http://blog.cognitect.com/' feedurl='http://blog.cognitect.com/blog?format=rss' title = 'Clojure, ClojureScript, Datomic, Programming'>Cognitec</a></li><li><a href='http://www.datasciencecentral.com/' feedurl='http://feeds.feedburner.com/FeaturedBlogPosts-DataScienceCentral?format=xml' title = 'Big Data, Data Mining, Machine Learning'>Data Science Central</a></li><li><a href='http://www.datasciencecentral.com/' feedurl='http://feeds.feedburner.com/ResearchDiscussions-DataScienceCentral?format=xml' title = 'Big Data, Data Mining, Machine Learning'>Data Science Central</a></li><li><a href='http://deeplearning.net' feedurl='http://deeplearning.net/feed/' title = 'Deep Learning, Neural Networks'>deeplearning.net</a></li><li><a href='http://hunch.net' feedurl='http://feeds2.feedburner.com/MachineLearningtheory' title = 'Machine Learning, Data Mining'>Hunch.net</a></li><li><a href='http://blog.kaggle.com' feedurl='http://blog.kaggle.com/feed/' title = 'Data mining, Big Data, Machine Learning, Competitions'>Kaggle</a></li><li><a href='http://www.kdnuggets.com/' feedurl='http://feeds.feedburner.com/kdnuggets-data-mining-analytics?format=xml' title = 'Data Mining, Big Data, Machine Learning'>KDnuggets</a></li><li><a href='http://www.thoughtworks.com/' feedurl='http://feeds.feedburner.com/thoughtworks-blogs?format=xml' title = 'Programming, Software Engineering'>Thoughtworks</a></li><li><a href='http://engineeringblog.yelp.com' feedurl='http://engineeringblog.yelp.com/feed' title = 'Big Data, Machine Learning, Text Mining'>Yelp Engineering</a></li></ul>
    
    <script type="text/javascript">
      $(document).ready(function(){
        updateFeeds(true);
      });
    </script>
    <script src="/javascripts/tinysort-min.js"></script>
    <script src="/javascripts/blogroll.js"></script>
    
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/analyticbastard">@analyticbastard</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'analyticbastard',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Analytic Bastard -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

</body>
</html>
