
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Image Pan-sharpening With PCA - The Analytic Bastard</title>
  <meta name="author" content="Analytic Bastard">

  
  <meta name="description" content="There is a collection of methods that are denominated image pan-sharpening, since they use
information available in multiple bands to create an image &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://analyticbastard.github.io/blog/2015/02/20/image-pan-sharpening-with-pca">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="The Analytic Bastard" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib<n/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">google.load("feeds", "1");</script>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">The Analytic Bastard</a></h1>
  
    <h2>Making geometers go crazier</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:analyticbastard.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Image Pan-sharpening With PCA</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-20T11:27:48+01:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:27 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>There is a collection of methods that are denominated image pan-sharpening, since they use
information available in multiple bands to create an image output that enjoys properties
from all sources, while minimizing drawbacks. The sources combined will contain several
frequency bands, maybe hundreds or thousands. In this case, we are interested in combining
a source with a high resolution but in gray scale, and a RGB image.</p>

<p>This is specially important in satellite imagery, since satellites often incorporate
a multispectral camera with limited resolution and a high-resolution, low-band/grayscale
camera among their equipment.</p>

<p>To play with this, we will use Matlab (since I’ve worked a little bit with its image
functions and array transformations, and this job will be quick)</p>

<p>We first load original image (included in Matlab)</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="matlab"><span class="line"><span class="n">peppers</span> <span class="p">=</span> <span class="n">imread</span><span class="p">(</span><span class="s">&#39;peppers.png&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img class="center" src="/images/peppers.png" title="Original image" alt="images" /></p>

<p>Now we simulate uniband (grayscale) and multiband (downscaled) imagery</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="matlab"><span class="line"><span class="n">multiband</span> <span class="p">=</span> <span class="n">imresize</span><span class="p">(</span><span class="n">peppers</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">);</span>
</span><span class="line"><span class="n">uniband</span> <span class="p">=</span> <span class="n">rgb2gray</span><span class="p">(</span><span class="n">peppers</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The multiband image looks like this</p>

<p><img class="center" src="/images/multiband.png" title="Multiband image" alt="images" /></p>

<p>And the high resolution (low band) image looks like this</p>

<p><img class="center" src="/images/uniband.png" title="High resolution image" alt="images" /></p>

<p>In the first case, we resize the image to a quarter of its size <strong><em>in both dimensions</em></strong>.
This means we loose 15/16 of the information! In the second case we compute a grayscale
image, loosing complementary information.</p>

<p>These two images are the ones we are interested in combining.</p>

<p>We now upscale multiband image (again, color image and same size than original but with
the information from the downscaled version)</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="matlab"><span class="line"><span class="n">interpolated</span><span class="p">=</span><span class="n">imresize</span><span class="p">(</span><span class="n">multiband</span><span class="p">,[</span><span class="nb">size</span><span class="p">(</span><span class="n">uniband</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="nb">size</span><span class="p">(</span><span class="n">uniband</span><span class="p">,</span><span class="mi">2</span><span class="p">)]);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We will now perform PCA on the images. To do that we need to convert the images to the
relevant variables we want to consider in the analysis. In this case, we want to extract
the bands of the images, so that we linearize the images, thus turning matrices into
unidimensional vectors. In case of the grayscale image, this is easily done by just
using the <code>(:)</code> operator. Bit in case of the RGB image, we will need to
reshape into a three-dimensional multivariate X = (R, G, B)</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="matlab"><span class="line"><span class="n">X</span><span class="p">=</span><span class="n">double</span><span class="p">(</span><span class="nb">reshape</span><span class="p">(</span><span class="n">interpolated</span><span class="p">,</span><span class="nb">numel</span><span class="p">(</span><span class="n">interpolated</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>where we have also converted the data type to double so that we can use Matlab functions.</p>

<p>Now we can compute the components and the projections onto the PCA space</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="matlab"><span class="line"><span class="p">[</span><span class="n">C</span><span class="p">,</span><span class="n">Y</span><span class="p">]=</span><span class="n">pca</span><span class="p">(</span><span class="n">X</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>where <code>C</code> is the matrix of loadings and <code>Y</code> is the projections of the data onto
the PCA space.</p>

<p>At this point, out of curiosity, we can compute correlations. Notice that the first
projection will correlate a lot with the univariate, since both capture mean luminosity
levels, which is an indicator of which component can be substituted by the higher
resolution grayscale image.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="matlab"><span class="line"><span class="n">corrcoef</span><span class="p">(</span><span class="n">Y</span><span class="p">(:,</span><span class="mi">1</span><span class="p">),</span><span class="n">double</span><span class="p">(</span><span class="n">uniband</span><span class="p">(:)))</span>
</span><span class="line"><span class="n">corrcoef</span><span class="p">(</span><span class="n">Y</span><span class="p">(:,</span><span class="mi">2</span><span class="p">),</span><span class="n">double</span><span class="p">(</span><span class="n">uniband</span><span class="p">(:)))</span>
</span><span class="line"><span class="n">corrcoef</span><span class="p">(</span><span class="n">Y</span><span class="p">(:,</span><span class="mi">3</span><span class="p">),</span><span class="n">double</span><span class="p">(</span><span class="n">uniband</span><span class="p">(:)))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The first one yields around <code>0.98</code>. Substitute the component now</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="matlab"><span class="line"><span class="n">Z</span><span class="p">=</span><span class="n">Y</span><span class="p">;</span>
</span><span class="line"><span class="n">Z</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)=(</span><span class="n">double</span><span class="p">(</span><span class="n">uniband</span><span class="p">(:)</span><span class="o">-</span><span class="n">min</span><span class="p">(</span><span class="n">uniband</span><span class="p">(:)))</span><span class="o">./</span><span class="n">double</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">uniband</span><span class="p">(:))</span><span class="o">-</span><span class="n">min</span><span class="p">(</span><span class="n">uniband</span><span class="p">(:))))</span><span class="o">*</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">Y</span><span class="p">(:,</span><span class="mi">1</span><span class="p">))</span><span class="o">-</span><span class="n">min</span><span class="p">(</span><span class="n">Y</span><span class="p">(:,</span><span class="mi">1</span><span class="p">)))</span><span class="o">+</span><span class="n">min</span><span class="p">(</span><span class="n">Y</span><span class="p">(:,</span><span class="mi">1</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We are adapting the maximum and minimum luminosity of the grayscale image to match
that of the first component.</p>

<p>We now project the new components back to the original RGB space. The matrix <code>C</code> is not
orthonormal, so that we don’t get a properly scaled representation, so we do it manually
(we could also make the matrix <code>C</code> orthonormal, though the effect of changing the first
component would have impacted the final luminosity levels and thus we still would have needed
to rescale the colors)</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="matlab"><span class="line"><span class="n">G</span><span class="p">=</span><span class="n">Z</span><span class="o">*</span><span class="n">C</span><span class="o">&#39;</span><span class="p">;</span>
</span><span class="line"><span class="n">I</span> <span class="p">=</span> <span class="p">(</span><span class="n">G</span> <span class="o">-</span> <span class="n">min</span><span class="p">(</span><span class="n">G</span><span class="p">(:)))</span><span class="o">/</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">G</span><span class="p">(:))</span><span class="o">-</span><span class="n">min</span><span class="p">(</span><span class="n">G</span><span class="p">(:)));</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Lastly we reshape from (R, G, B) multivariate to an RGB image</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="matlab"><span class="line"><span class="n">merged</span> <span class="p">=</span> <span class="nb">reshape</span><span class="p">(</span><span class="n">I</span><span class="p">,</span> <span class="nb">size</span><span class="p">(</span><span class="n">interpolated</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The result shows that, effectively, we enjoy the best part of the two worlds</p>

<p><img class="center" src="/images/merged.png" title="Merged image" alt="images" /></p>

<p>As mentioned, we could play with the luminiscence levels to attain a color more loyal
to the original.</p>

<p>The reason why this works is that the first PCA component takes most of the information,
thus creating a sort of best fit for all colors in the RGB spectrum. This is a kind of
luminiscence, which is what the grayscape image is and what we substitute it by.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Analytic Bastard</span></span>

      




<time class='entry-date' datetime='2015-02-20T11:27:48+01:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:27 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/image-processing/'>image processing</a>, <a class='category' href='/blog/categories/pca/'>pca</a>, <a class='category' href='/blog/categories/statistics/'>statistics</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://analyticbastard.github.io/blog/2015/02/20/image-pan-sharpening-with-pca/" data-via="" data-counturl="http://analyticbastard.github.io/blog/2015/02/20/image-pan-sharpening-with-pca/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/02/08/google-original-page-rank/" title="Previous Post: Google's original Page Rank implementation">&laquo; Google&#8217;s original Page Rank implementation</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/02/20/image-pan-sharpening-with-pca/">Image Pan-sharpening With PCA</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/08/google-original-page-rank/">Google&#8217;s Original Page Rank Implementation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/10/my-git-workflow/">My Git Workflow</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/06/hackintosh/">Hackintosh</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/01/principal-component-analysis/">Principal Component Analysis</a>
      </li>
    
  </ul>
</section>
<section>
    <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/computation'>computation (1)</a></li><li><a href='/blog/categories/computation-programming'>computation - programming (3)</a></li><li><a href='/blog/categories/computation-theory'>computation - theory (1)</a></li><li><a href='/blog/categories/computation-tools'>computation - tools (1)</a></li><li><a href='/blog/categories/computation-web'>computation - web (1)</a></li><li><a href='/blog/categories/data-analysis'>data analysis (1)</a></li><li><a href='/blog/categories/data-analysis-tools'>data analysis - tools (1)</a></li><li><a href='/blog/categories/hacking'>hacking (1)</a></li><li><a href='/blog/categories/image-processing'>image processing (1)</a></li><li><a href='/blog/categories/machine-learning-kernel-methods'>machine learning - kernel methods (3)</a></li><li><a href='/blog/categories/machine-learning-probabilistic-methods'>machine learning - probabilistic methods (1)</a></li><li><a href='/blog/categories/machine-learning-svm'>machine learning - svm (1)</a></li><li><a href='/blog/categories/mathematics'>mathematics (1)</a></li><li><a href='/blog/categories/mathematics-analysis'>mathematics - analysis (2)</a></li><li><a href='/blog/categories/mathematics-differential-geometry'>mathematics - differential geometry (1)</a></li><li><a href='/blog/categories/mathematics-geometry'>mathematics - geometry (1)</a></li><li><a href='/blog/categories/maths'>maths (1)</a></li><li><a href='/blog/categories/matrices'>matrices (1)</a></li><li><a href='/blog/categories/pca'>pca (1)</a></li><li><a href='/blog/categories/programming-mapreduce'>programming - mapreduce (1)</a></li><li><a href='/blog/categories/programming-python'>programming - python (1)</a></li><li><a href='/blog/categories/statistics'>statistics (3)</a></li></ul>
</section>
<section>
    <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/computation' style='font-size: 120.0%'>computation</a> <a href='/blog/categories/computation-programming' style='font-size: 160.0%'>computation - programming</a> <a href='/blog/categories/computation-theory' style='font-size: 120.0%'>computation - theory</a> <a href='/blog/categories/computation-tools' style='font-size: 120.0%'>computation - tools</a> <a href='/blog/categories/computation-web' style='font-size: 120.0%'>computation - web</a> <a href='/blog/categories/data-analysis' style='font-size: 120.0%'>data analysis</a> <a href='/blog/categories/data-analysis-tools' style='font-size: 120.0%'>data analysis - tools</a> <a href='/blog/categories/hacking' style='font-size: 120.0%'>hacking</a> <a href='/blog/categories/image-processing' style='font-size: 120.0%'>image processing</a> <a href='/blog/categories/machine-learning-kernel-methods' style='font-size: 160.0%'>machine learning - kernel methods</a> <a href='/blog/categories/machine-learning-probabilistic-methods' style='font-size: 120.0%'>machine learning - probabilistic methods</a> <a href='/blog/categories/machine-learning-svm' style='font-size: 120.0%'>machine learning - svm</a> <a href='/blog/categories/mathematics' style='font-size: 120.0%'>mathematics</a> <a href='/blog/categories/mathematics-analysis' style='font-size: 140.0%'>mathematics - analysis</a> <a href='/blog/categories/mathematics-differential-geometry' style='font-size: 120.0%'>mathematics - differential geometry</a> <a href='/blog/categories/mathematics-geometry' style='font-size: 120.0%'>mathematics - geometry</a> <a href='/blog/categories/maths' style='font-size: 120.0%'>maths</a> <a href='/blog/categories/matrices' style='font-size: 120.0%'>matrices</a> <a href='/blog/categories/pca' style='font-size: 120.0%'>pca</a> <a href='/blog/categories/programming-mapreduce' style='font-size: 120.0%'>programming - mapreduce</a> <a href='/blog/categories/programming-python' style='font-size: 120.0%'>programming - python</a> <a href='/blog/categories/statistics' style='font-size: 160.0%'>statistics</a> </span>
</section><section>
    <script type="text/javascript" src="//rb.revolvermaps.com/0/0/6.js?i=1eyn18efppk&amp;m=7&amp;s=270&amp;c=e63100&amp;cr1=ffffff&amp;f=arial&amp;l=0&amp;bv=90&amp;lx=-420&amp;ly=420&amp;hi=20&amp;he=7&amp;hc=a8ddff&amp;rs=80" async="async"></script>
</section><section>
  <h3>Blogroll</h3>
  <!-- IMPORTANT: Do not change the below ID as it will affect the functioning of the plugin-->
    <ul id="blogroll-list"><li><a href='http://blog.cognitect.com/' feedurl='http://blog.cognitect.com/blog?format=rss' title = 'Clojure, ClojureScript, Datomic, Programming'>Cognitec</a></li><li><a href='http://www.datasciencecentral.com/' feedurl='http://feeds.feedburner.com/FeaturedBlogPosts-DataScienceCentral?format=xml' title = 'Big Data, Data Mining, Machine Learning'>Data Science Central</a></li><li><a href='http://www.datasciencecentral.com/' feedurl='http://feeds.feedburner.com/ResearchDiscussions-DataScienceCentral?format=xml' title = 'Big Data, Data Mining, Machine Learning'>Data Science Central</a></li><li><a href='http://deeplearning.net' feedurl='http://deeplearning.net/feed/' title = 'Deep Learning, Neural Networks'>deeplearning.net</a></li><li><a href='http://hunch.net' feedurl='http://feeds2.feedburner.com/MachineLearningtheory' title = 'Machine Learning, Data Mining'>Hunch.net</a></li><li><a href='http://blog.kaggle.com' feedurl='http://blog.kaggle.com/feed/' title = 'Data mining, Big Data, Machine Learning, Competitions'>Kaggle</a></li><li><a href='http://www.kdnuggets.com/' feedurl='http://feeds.feedburner.com/kdnuggets-data-mining-analytics?format=xml' title = 'Data Mining, Big Data, Machine Learning'>KDnuggets</a></li><li><a href='http://www.thoughtworks.com/' feedurl='http://feeds.feedburner.com/thoughtworks-blogs?format=xml' title = 'Programming, Software Engineering'>Thoughtworks</a></li><li><a href='http://engineeringblog.yelp.com' feedurl='http://engineeringblog.yelp.com/feed' title = 'Big Data, Machine Learning, Text Mining'>Yelp Engineering</a></li></ul>
    
    <script type="text/javascript">
      $(document).ready(function(){
        updateFeeds(true);
      });
    </script>
    <script src="/javascripts/tinysort-min.js"></script>
    <script src="/javascripts/blogroll.js"></script>
    
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/analyticbastard">@analyticbastard</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'analyticbastard',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Analytic Bastard -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

</body>
</html>
